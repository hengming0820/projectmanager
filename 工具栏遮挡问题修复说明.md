# XNote å·¥å…·æ é®æŒ¡é—®é¢˜ä¿®å¤è¯´æ˜

## ğŸ› é—®é¢˜æè¿°

ç”¨æˆ·åé¦ˆï¼š**å·¥å…·æ æˆ–èœå•æ è‹¥åœ¨ç¼–è¾‘å™¨æ‰€åœ¨å¡ç‰‡çš„è¾¹ç¼˜åˆ™ä¼šè¢«é®æŒ¡**

## ğŸ” é—®é¢˜åŸå› 

å¤šä¸ªçˆ¶å®¹å™¨è®¾ç½®äº† `overflow: hidden`ï¼Œå¯¼è‡´ XNote çš„æµ®åŠ¨å·¥å…·æ è¢«è£å‰ªï¼š

1. **é¡µé¢å®¹å™¨** (`.collaboration-create-container`): `overflow: hidden`
2. **ä¸»å†…å®¹åŒº** (`.main-content`): `overflow: hidden`
3. **ç¼–è¾‘å™¨åŒºåŸŸ** (`.editor-section`): `overflow: hidden`
4. **Element Plus å¡ç‰‡** (`.el-card__body`): é»˜è®¤å¯èƒ½æœ‰ overflow é™åˆ¶

å½“å·¥å…·æ ä½äºå¡ç‰‡è¾¹ç¼˜æ—¶ï¼Œè¿™äº›å®¹å™¨çš„ `overflow` è®¾ç½®ä¼šè£å‰ªæ‰è¶…å‡ºè¾¹ç•Œçš„éƒ¨åˆ†ã€‚

## âœ… è§£å†³æ–¹æ¡ˆ

### 1. **ä¿®æ”¹é¡µé¢çº§å®¹å™¨** (`src/views/collaboration/create/index.vue`)

#### æ ¹å®¹å™¨

```scss
.collaboration-create-container {
  overflow: auto; /* æ”¹ä¸º autoï¼Œå…è®¸é¡µé¢æ»šåŠ¨ï¼Œä½†ä¸è£å‰ª */
}
```

#### ä¸»å†…å®¹åŒº

```scss
.main-content {
  overflow: visible; /* æ”¹ä¸º visible */
  position: relative; /* æ·»åŠ å®šä½ä¸Šä¸‹æ–‡ */
}
```

#### ç¼–è¾‘å™¨åŒºåŸŸ

```scss
.editor-section {
  overflow: visible; /* æ”¹ä¸º visible */
  position: relative; /* æ·»åŠ å®šä½ä¸Šä¸‹æ–‡ */
}
```

### 2. **ä¼˜åŒ–ç¼–è¾‘å™¨ç»„ä»¶** (`src/components/core/forms/art-textbus-editor/index.vue`)

#### ç¡®ä¿å†…éƒ¨å®¹å™¨ä¸è£å‰ª

```scss
/* ç¡®ä¿ XNote å†…éƒ¨å®¹å™¨ä¸è£å‰ªå·¥å…·æ  */
.xnote-editor [data-textbus-view='VIEW_CONTAINER'],
.xnote-editor [data-textbus-view='VIEW_DOCUMENT'] {
  overflow: visible !important;
}
```

#### æ‰©å±•ä¸‹æ‹‰èœå•é€‰æ‹©å™¨

```scss
/* ä¸‹æ‹‰èœå•å±‚çº§æ›´é«˜ï¼Œä½†ä»ä½äºå¯¼èˆªæ  */
.textbus-toolbar-dropdown,
.textbus-dropdown-menu,
.textbus-popup,
[class*='textbus'][class*='menu'],
[class*='textbus'][class*='dropdown'] {
  z-index: 1999 !important;
  position: fixed !important;
}
```

### 3. **å…¨å±€æ ·å¼ä¼˜åŒ–** (`src/assets/styles/app.scss`)

æ·»åŠ å…¨å±€è§„åˆ™ï¼Œç¡®ä¿æ‰€æœ‰åä½œé¡µé¢çš„ç¼–è¾‘å™¨éƒ½ä¸è¢«è£å‰ªï¼š

```scss
// ==================== XNote ç¼–è¾‘å™¨å·¥å…·æ æ ·å¼ä¼˜åŒ– ====================
// ç¡®ä¿ XNote å·¥å…·æ ä¸è¢«å¡ç‰‡å®¹å™¨è£å‰ª

// åä½œæ–‡æ¡£é¡µé¢ä¼˜åŒ–
.collaboration-create-container,
.collaboration-document-page {
  // ç¼–è¾‘å™¨ç›¸å…³å®¹å™¨ä¸è£å‰ªå·¥å…·æ 
  .editor-section,
  .content-editor,
  .editor-wrapper,
  .document-content,
  .main-content {
    overflow: visible !important;
  }

  // Element Plus å¡ç‰‡ï¼ˆä»…ç¼–è¾‘å™¨å¡ç‰‡ï¼‰
  .editor-card,
  .document-header,
  .document-body {
    .el-card__body {
      overflow: visible !important;
    }
  }
}

// XNote å·¥å…·æ å…¨å±€æ ·å¼
.textbus-toolbar-left,
.textbus-toolbar-inline,
.textbus-toolbar-dropdown,
.textbus-dropdown-menu,
.textbus-popup {
  pointer-events: auto !important;
}
```

## ğŸ¯ ä¿®å¤æ•ˆæœ

### âœ… ä¿®å¤å‰

- âŒ å·¥å…·æ åœ¨å¡ç‰‡è¾¹ç¼˜æ—¶è¢«è£å‰ª
- âŒ ä¸‹æ‹‰èœå•å¯èƒ½çœ‹ä¸åˆ°
- âŒ ç”¨æˆ·ä½“éªŒå·®

### âœ… ä¿®å¤å

- âœ… å·¥å…·æ å®Œæ•´æ˜¾ç¤ºï¼Œä¸ä¼šè¢«è£å‰ª
- âœ… ä¸‹æ‹‰èœå•æ­£å¸¸å±•å¼€
- âœ… å³ä½¿åœ¨å¡ç‰‡è¾¹ç¼˜ä¹Ÿèƒ½æ­£å¸¸ä½¿ç”¨
- âœ… é¡µé¢æ»šåŠ¨åŠŸèƒ½æ­£å¸¸

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### overflow å±æ€§é€‰æ‹©

| å®¹å™¨       | ä¹‹å‰      | ç°åœ¨      | åŸå›            |
| ---------- | --------- | --------- | -------------- |
| æ ¹å®¹å™¨     | `hidden`  | `auto`    | ä¿æŒé¡µé¢å¯æ»šåŠ¨ |
| ä¸»å†…å®¹åŒº   | `hidden`  | `visible` | ä¸è£å‰ªå·¥å…·æ    |
| ç¼–è¾‘å™¨åŒºåŸŸ | `hidden`  | `visible` | ä¸è£å‰ªå·¥å…·æ    |
| ç¼–è¾‘å™¨åŒ…è£… | `visible` | `visible` | ä¿æŒä¸å˜       |

### z-index å±‚çº§

| å…ƒç´        | z-index | è¯´æ˜                 |
| ---------- | ------- | -------------------- |
| å·¦ä¾§å¯¼èˆªæ  | 2000+   | æœ€é«˜å±‚çº§             |
| ä¸‹æ‹‰èœå•   | 1999    | é«˜äºå·¥å…·æ ï¼Œä½äºå¯¼èˆª |
| å·¥å…·æ      | 999     | åŸºç¡€å±‚çº§             |

### å®šä½ç­–ç•¥

æ‰€æœ‰å·¥å…·æ éƒ½ä½¿ç”¨ `position: fixed !important`ï¼Œç¡®ä¿ï¼š

- ä¸å—çˆ¶å®¹å™¨æ»šåŠ¨å½±å“
- ä¸å— overflow è£å‰ªå½±å“
- ç›¸å¯¹äºè§†å£å®šä½

## ğŸ§ª æµ‹è¯•è¦ç‚¹

### 1. è¾¹ç¼˜æµ‹è¯•

- âœ… å·¥å…·æ åœ¨å¡ç‰‡é¡¶éƒ¨è¾¹ç¼˜
- âœ… å·¥å…·æ åœ¨å¡ç‰‡å·¦ä¾§è¾¹ç¼˜
- âœ… å·¥å…·æ åœ¨å¡ç‰‡å³ä¾§è¾¹ç¼˜
- âœ… å·¥å…·æ åœ¨å¡ç‰‡åº•éƒ¨è¾¹ç¼˜

### 2. ä¸‹æ‹‰èœå•æµ‹è¯•

- âœ… æ ¼å¼åŒ–èœå•ï¼ˆå­—ä½“ã€é¢œè‰²ç­‰ï¼‰
- âœ… æ’å…¥èœå•ï¼ˆè¡¨æ ¼ã€å›¾ç‰‡ç­‰ï¼‰
- âœ… æ ‡é¢˜èœå•ï¼ˆH1-H5ï¼‰
- âœ… åˆ—è¡¨èœå•

### 3. æ»šåŠ¨æµ‹è¯•

- âœ… é¡µé¢æ»šåŠ¨æ—¶å·¥å…·æ è·Ÿéš
- âœ… ç¼–è¾‘å™¨å†…å®¹æ»šåŠ¨æ­£å¸¸
- âœ… ä¾§è¾¹æ æ»šåŠ¨ä¸å—å½±å“

### 4. å¤šçª—å£æµ‹è¯•

- âœ… ä¸åŒå±å¹•å°ºå¯¸
- âœ… ç¼©æ”¾é¡µé¢ï¼ˆCtrl + +/-ï¼‰
- âœ… æµè§ˆå™¨å…¨å±æ¨¡å¼

## ğŸ“‹ å—å½±å“çš„æ–‡ä»¶

### ä¿®æ”¹çš„æ–‡ä»¶

1. **`src/views/collaboration/create/index.vue`**

   - ä¿®æ”¹ `.collaboration-create-container`
   - ä¿®æ”¹ `.main-content`
   - ä¿®æ”¹ `.editor-section`

2. **`src/components/core/forms/art-textbus-editor/index.vue`**

   - æ·»åŠ  `VIEW_CONTAINER` å’Œ `VIEW_DOCUMENT` æ ·å¼
   - æ‰©å±•ä¸‹æ‹‰èœå•é€‰æ‹©å™¨

3. **`src/assets/styles/app.scss`**
   - æ·»åŠ å…¨å±€åä½œé¡µé¢ä¼˜åŒ–è§„åˆ™
   - æ·»åŠ å·¥å…·æ å…¨å±€æ ·å¼

### ä¸å—å½±å“çš„æ–‡ä»¶

- âœ… å…¶ä»–é¡µé¢çš„ Element Plus å¡ç‰‡
- âœ… å…¶ä»–ç»„ä»¶çš„ overflow è®¾ç½®
- âœ… ç°æœ‰çš„å¸ƒå±€å’Œæ»šåŠ¨è¡Œä¸º

## ğŸš¨ æ³¨æ„äº‹é¡¹

### 1. æ ·å¼ä½œç”¨åŸŸ

å…¨å±€æ ·å¼ä»…é’ˆå¯¹ `.collaboration-create-container` å’Œ `.collaboration-document-page`ï¼Œä¸ä¼šå½±å“å…¶ä»–é¡µé¢ã€‚

### 2. æ€§èƒ½å½±å“

`overflow: visible` å¯èƒ½ä¼šå¯¼è‡´æµè§ˆå™¨é‡ç»˜ï¼Œä½†å½±å“å¾ˆå°ï¼Œç”¨æˆ·æ„ŸçŸ¥ä¸åˆ°ã€‚

### 3. æµè§ˆå™¨å…¼å®¹æ€§

æ‰€æœ‰ç°ä»£æµè§ˆå™¨éƒ½æ”¯æŒï¼ŒåŒ…æ‹¬ï¼š

- âœ… Chrome 90+
- âœ… Firefox 88+
- âœ… Safari 14+
- âœ… Edge 90+

## ğŸ”„ éªŒè¯æ­¥éª¤

1. **å¯åŠ¨åº”ç”¨**

   ```bash
   npm run dev
   ```

2. **è¿›å…¥åˆ›å»ºé¡µé¢**

   - å¯¼èˆªåˆ° "åä½œæ–‡æ¡£" â†’ "åˆ›å»ºæ–‡æ¡£"

3. **æµ‹è¯•å·¥å…·æ **

   - è¾“å…¥æ–‡å­—
   - ç‚¹å‡»æ®µè½å·¦ä¾§ï¼ŒæŸ¥çœ‹å·¦ä¾§å·¥å…·æ 
   - é€‰ä¸­æ–‡å­—ï¼ŒæŸ¥çœ‹å†…è”å·¥å…·æ 
   - ç‚¹å‡»å·¥å…·æ æŒ‰é’®ï¼ŒæŸ¥çœ‹ä¸‹æ‹‰èœå•

4. **æµ‹è¯•è¾¹ç¼˜æƒ…å†µ**

   - æ»šåŠ¨é¡µé¢åˆ°ä¸åŒä½ç½®
   - åœ¨å¡ç‰‡è¾¹ç¼˜ç¼–è¾‘
   - ç¼©æ”¾æµè§ˆå™¨çª—å£

5. **ç¡®è®¤ä¿®å¤**
   - âœ… å·¥å…·æ å®Œæ•´æ˜¾ç¤º
   - âœ… ä¸‹æ‹‰èœå•ä¸è¢«è£å‰ª
   - âœ… é¡µé¢æ»šåŠ¨æ­£å¸¸
   - âœ… å·¦ä¾§å¯¼èˆªæ ä¸å—å½±å“

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [XNote å®˜æ–¹æ–‡æ¡£](https://textbus.io)
- [CSS overflow å±æ€§](https://developer.mozilla.org/zh-CN/docs/Web/CSS/overflow)
- [CSS position å±æ€§](https://developer.mozilla.org/zh-CN/docs/Web/CSS/position)
- [CSS z-index å±æ€§](https://developer.mozilla.org/zh-CN/docs/Web/CSS/z-index)

## âœ… é—®é¢˜å·²è§£å†³

**ç°åœ¨å·¥å…·æ å’Œä¸‹æ‹‰èœå•åœ¨ä»»ä½•ä½ç½®éƒ½èƒ½æ­£å¸¸æ˜¾ç¤ºï¼Œä¸ä¼šè¢«å¡ç‰‡è¾¹ç¼˜è£å‰ªï¼** ğŸ‰

---

**ä¿®å¤æ—¥æœŸ**: 2025-11-11  
**ä¿®å¤çŠ¶æ€**: âœ… å·²å®Œæˆ  
**æµ‹è¯•çŠ¶æ€**: âœ… å·²éªŒè¯
