# æ—¶é—´å¤„ç†å®Œæ•´è¯´æ˜æ–‡æ¡£

## ğŸ“‹ ç›®å½•

1. [æ—¶é—´æµç¨‹æ¦‚è¿°](#æ—¶é—´æµç¨‹æ¦‚è¿°)
2. [æ•°æ®åº“å­˜å‚¨](#æ•°æ®åº“å­˜å‚¨)
3. [åç«¯å¤„ç†](#åç«¯å¤„ç†)
4. [å‰ç«¯å¤„ç†](#å‰ç«¯å¤„ç†)
5. [å·²ä¿®å¤çš„é—®é¢˜](#å·²ä¿®å¤çš„é—®é¢˜)
6. [å®Œæ•´æ–‡ä»¶æ¸…å•](#å®Œæ•´æ–‡ä»¶æ¸…å•)

---

## ğŸ”„ æ—¶é—´æµç¨‹æ¦‚è¿°

### å®Œæ•´æ—¶é—´æµç¨‹

```
ç”¨æˆ·æ“ä½œï¼ˆæµè§ˆå™¨ï¼‰
   â†“
å‰ç«¯å‘èµ·è¯·æ±‚
   â†“
åç«¯APIå¤„ç†
   â”œâ”€â†’ datetime.now()      # è·å–æœåŠ¡å™¨æœ¬åœ°æ—¶é—´ï¼ˆUTC+8ï¼‰
   â”œâ”€â†’ å­˜å…¥æ•°æ®åº“           # PostgreSQL å­˜å‚¨
   â””â”€â†’ åºåˆ—åŒ–è¿”å›          # JSON æ ¼å¼ï¼ˆç¼ºå°‘Zæ ‡è¯†ï¼‰âŒ
       â†“
å‰ç«¯æ¥æ”¶
   â”œâ”€â†’ new Date(str)       # JavaScriptè§£æï¼ˆè¯¯è®¤ä¸ºæœ¬åœ°æ—¶é—´ï¼‰âŒ
   â””â”€â†’ fixUTCTimeString    # ä¿®å¤ï¼šæ·»åŠ Zæ ‡è¯† âœ…
       â†“
æ­£ç¡®æ˜¾ç¤ºï¼ˆUTC+8æœ¬åœ°æ—¶é—´ï¼‰âœ…
```

---

## ğŸ’¾ æ•°æ®åº“å­˜å‚¨

### PostgreSQL æ—¶é—´å­—æ®µå®šä¹‰

**æ–‡ä»¶ï¼š** `backend/app/models/task.py`

```python
from sqlalchemy import Column, DateTime
from sqlalchemy.sql import func

class Task(Base):
    # è‡ªåŠ¨æ—¶é—´æˆ³ï¼ˆæ•°æ®åº“çº§åˆ«ï¼‰
    created_at = Column(DateTime, server_default=func.now())
    updated_at = Column(DateTime, server_default=func.now(), onupdate=func.now())

    # ä¸šåŠ¡æ—¶é—´ï¼ˆåº”ç”¨å±‚è®¾ç½®ï¼‰
    assigned_at = Column(DateTime)      # é¢†å–æ—¶é—´
    submitted_at = Column(DateTime)     # æäº¤æ—¶é—´
    reviewed_at = Column(DateTime)      # å®¡æ ¸æ—¶é—´
    skipped_at = Column(DateTime)       # è·³è¿‡æ—¶é—´
```

### æ—¶é—´æ¥æº

| å­—æ®µ           | æ¥æº                    | è¯´æ˜                  |
| -------------- | ----------------------- | --------------------- |
| `created_at`   | æ•°æ®åº“ `func.now()`     | PostgreSQL æœåŠ¡å™¨æ—¶é—´ |
| `updated_at`   | æ•°æ®åº“ `func.now()`     | è‡ªåŠ¨æ›´æ–°              |
| `assigned_at`  | Python `datetime.now()` | é¢†å–æ—¶ç”±åç«¯APIè®¾ç½®   |
| `submitted_at` | Python `datetime.now()` | æäº¤æ—¶ç”±åç«¯APIè®¾ç½®   |
| `reviewed_at`  | Python `datetime.now()` | å®¡æ ¸æ—¶ç”±åç«¯APIè®¾ç½®   |

### å­˜å‚¨çš„æ˜¯ä»€ä¹ˆæ—¶é—´ï¼Ÿ

**ç­”ï¼šæœåŠ¡å™¨æœ¬åœ°æ—¶é—´ï¼ˆUTC+8ï¼Œä¸­å›½æ ‡å‡†æ—¶é—´ï¼‰**

```python
# backend/app/api/tasks.py

from datetime import datetime

# ä»»åŠ¡é¢†å–
task.assigned_at = datetime.now()  # â† æœåŠ¡å™¨æœ¬åœ°æ—¶é—´ï¼ŒéUTC
# ä¾‹å¦‚ï¼š2025-10-22 18:00:00ï¼ˆæ²¡æœ‰æ—¶åŒºä¿¡æ¯ï¼‰

# ä»»åŠ¡æäº¤
task.submitted_at = datetime.now()  # â† æœåŠ¡å™¨æœ¬åœ°æ—¶é—´

# ä»»åŠ¡å®¡æ ¸
task.reviewed_at = datetime.now()   # â† æœåŠ¡å™¨æœ¬åœ°æ—¶é—´
```

**å…³é”®ç‚¹ï¼š**

- âœ… ä½¿ç”¨ `datetime.now()`ï¼Œä¸æ˜¯ `datetime.utcnow()`
- âœ… å­˜å‚¨çš„æ˜¯**ä¸­å›½æ ‡å‡†æ—¶é—´ï¼ˆUTC+8ï¼‰**
- âŒ ä½†æ—¶é—´å¯¹è±¡æ˜¯ **naive datetime**ï¼ˆä¸å«æ—¶åŒºä¿¡æ¯ï¼‰

---

## ğŸ”§ åç«¯å¤„ç†

### æ—¶é—´è·å–æ–¹å¼

**æ–‡ä»¶ï¼š** `backend/app/api/tasks.py`

```python
from datetime import datetime

# âŒ é”™è¯¯æ–¹å¼ï¼ˆä¼šé€ æˆé—®é¢˜ï¼‰
# datetime.utcnow()  # è¿”å› UTC æ—¶é—´ï¼Œä½†ä¸å«æ—¶åŒºä¿¡æ¯

# âœ… å½“å‰æ–¹å¼ï¼ˆå­˜å‚¨æœ¬åœ°æ—¶é—´ï¼‰
datetime.now()  # è¿”å›æœåŠ¡å™¨æœ¬åœ°æ—¶é—´ï¼ˆUTC+8ï¼‰ï¼Œä¸å«æ—¶åŒºä¿¡æ¯

# âœ… ç†æƒ³æ–¹å¼ï¼ˆæ¨èæ”¹è¿›ï¼‰
from datetime import datetime, timezone
datetime.now(timezone.utc)  # è¿”å› UTC æ—¶é—´ï¼Œä¸”å«æ—¶åŒºä¿¡æ¯
```

### Pydantic åºåˆ—åŒ–

**é—®é¢˜ï¼š** é»˜è®¤åºåˆ—åŒ–ä¸ä¼šæ·»åŠ æ—¶åŒºæ ‡è¯†

```python
# æ•°æ®åº“ä¸­çš„æ—¶é—´ï¼š2025-10-22 18:00:00ï¼ˆUTC+8ï¼‰
# â†“ Pydantic åºåˆ—åŒ–
# è¿”å›ç»™å‰ç«¯ï¼š{
#   "submitted_at": "2025-10-22T18:00:00.123456"  # âŒ ç¼ºå°‘æ—¶åŒºæ ‡è¯†
# }
```

### æ”¹è¿›å»ºè®®ï¼ˆå¯é€‰ï¼‰

**æ–¹æ¡ˆ1ï¼šä¿®æ”¹ Pydantic Schema**

```python
from pydantic import BaseModel, field_serializer
from datetime import datetime

class TaskResponse(BaseModel):
    submitted_at: datetime | None

    @field_serializer('submitted_at')
    def serialize_datetime(self, dt: datetime | None, _info):
        if dt is None:
            return None
        # å¦‚æœæ²¡æœ‰æ—¶åŒºä¿¡æ¯ï¼Œå‡å®šä¸º UTC+8ï¼Œè½¬æ¢ä¸º UTC å¹¶æ·»åŠ  Z
        if dt.tzinfo is None:
            # æœ¬åœ°æ—¶é—´ï¼ˆUTC+8ï¼‰â†’ UTC
            from datetime import timedelta, timezone
            utc_time = dt - timedelta(hours=8)
            return utc_time.replace(tzinfo=timezone.utc).isoformat()
        return dt.isoformat()
```

**æ–¹æ¡ˆ2ï¼šç»Ÿä¸€ä½¿ç”¨ UTC æ—¶é—´ï¼ˆæ¨èï¼‰**

```python
# ä¿®æ”¹æ‰€æœ‰ datetime.now() ä¸º
from datetime import datetime, timezone
datetime.now(timezone.utc)

# æ•°æ®åº“å­—æ®µä¹Ÿä¿®æ”¹ä¸º TIMESTAMP WITH TIME ZONE
```

---

## ğŸ¨ å‰ç«¯å¤„ç†

### é—®é¢˜æ ¹æº

**åç«¯è¿”å›ï¼š**

```json
{
  "submitted_at": "2025-10-22T18:00:00.123456"
}
```

**JavaScript è§£æï¼š**

```javascript
// âŒ é”™è¯¯è§£æï¼ˆå½“ä½œæœ¬åœ°æ—¶é—´ï¼‰
new Date('2025-10-22T18:00:00.123456')
// â†’ Wed Oct 22 2025 18:00:00 GMT+0800ï¼ˆé”™è¯¯ï¼ï¼‰
// åº”è¯¥æ˜¯ï¼šWed Oct 22 2025 18:00:00 GMT+0800ï¼ˆæ­£ç¡®ï¼ï¼‰
```

**ä¸ºä»€ä¹ˆä¼šé”™ï¼Ÿ**

- ISO 8601 æ ‡å‡†ï¼šæ²¡æœ‰ `Z` æˆ–æ—¶åŒºåç§»çš„æ—¶é—´å­—ç¬¦ä¸²è¢«è§£æä¸º**æœ¬åœ°æ—¶é—´**
- åç«¯å®é™…è¿”å›çš„æ˜¯ **UTC+8 æ—¶é—´**ï¼Œä½†ç¼ºå°‘æ ‡è¯†
- å‰ç«¯è¯¯è®¤ä¸ºæ˜¯**æœ¬åœ°æ—¶é—´**ï¼Œå¯¼è‡´æ˜¾ç¤ºé”™è¯¯

### è§£å†³æ–¹æ¡ˆ

**å·¥å…·å‡½æ•°ï¼š** `src/utils/timeFormat.ts`

```typescript
/**
 * ä¿®å¤ UTC æ—¶é—´å­—ç¬¦ä¸²
 * æ£€æµ‹ç¼ºå°‘ Z æ ‡è¯†çš„æ—¶é—´å­—ç¬¦ä¸²ï¼Œè‡ªåŠ¨æ·»åŠ 
 */
export function fixUTCTimeString(timeStr: string): string {
  let fixedStr = timeStr.trim()

  // å¦‚æœæœ‰ T ä½†æ²¡æœ‰ Z æˆ– +/- æ—¶åŒºæ ‡è¯†
  if (
    fixedStr.includes('T') &&
    !fixedStr.includes('Z') &&
    !fixedStr.includes('+') &&
    !fixedStr.includes('-', 10)
  ) {
    // å‡å®šä¸º UTC æ—¶é—´ï¼Œæ·»åŠ  Z
    fixedStr = fixedStr.split('.')[0] + 'Z'
  }

  return fixedStr
}

/**
 * æ ¼å¼åŒ–æ—¥æœŸæ—¶é—´
 */
export function formatDateTime(
  date: string | Date | null | undefined,
  format: 'datetime' | 'date' | 'time' = 'datetime'
): string {
  if (!date) return '-'

  // å¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œå…ˆä¿®å¤ UTC æ—¶é—´æ ‡è¯†
  let dateObj: Date
  if (typeof date === 'string') {
    const fixedStr = fixUTCTimeString(date)
    dateObj = new Date(fixedStr)
  } else {
    dateObj = date
  }

  // æ ¼å¼åŒ–è¾“å‡º
  // ...
}
```

### ä¿®å¤æ•ˆæœ

**ä¿®å¤å‰ï¼š**

```javascript
// åç«¯è¿”å›ï¼š"2025-10-22T10:00:00"ï¼ˆå®é™…æ˜¯ UTC+8 çš„ 10:00ï¼‰
new Date('2025-10-22T10:00:00')
// â†’ 10:00ï¼ˆé”™è¯¯ï¼åº”è¯¥æ˜¯ 10:00ï¼Œå› ä¸ºæ˜¯æœ¬åœ°æ—¶é—´ï¼‰
```

**ä¿®å¤åï¼š**

```javascript
// åç«¯è¿”å›ï¼š"2025-10-22T10:00:00"ï¼ˆå®é™…æ˜¯ UTC çš„ 10:00ï¼‰
fixUTCTimeString('2025-10-22T10:00:00')
// â†’ "2025-10-22T10:00:00Z"ï¼ˆæ·»åŠ  Z æ ‡è¯†ï¼‰

new Date('2025-10-22T10:00:00Z')
// â†’ 18:00ï¼ˆæ­£ç¡®ï¼UTC 10:00 = UTC+8 18:00ï¼‰
```

**ç­‰ç­‰ï¼Œè¿™é‡Œæœ‰ä¸ªé—®é¢˜ï¼**

å®é™…ä¸Šï¼Œå¦‚æœåç«¯å­˜å‚¨çš„æ˜¯**æœ¬åœ°æ—¶é—´ï¼ˆUTC+8ï¼‰**ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸åº”è¯¥æ·»åŠ  `Z`ï¼

è®©æˆ‘é‡æ–°åˆ†æ...

---

## ğŸ¤” é‡æ–°åˆ†æï¼šçœŸå®æƒ…å†µ

### å®é™…å­˜å‚¨çš„æ—¶é—´

1. **æœåŠ¡å™¨æ—¶åŒºï¼š** UTC+8ï¼ˆä¸­å›½æ ‡å‡†æ—¶é—´ï¼‰
2. **`datetime.now()`ï¼š** è¿”å›æœåŠ¡å™¨æœ¬åœ°æ—¶é—´ï¼Œä¾‹å¦‚ï¼š`2025-10-22 18:00:00`
3. **æ•°æ®åº“å­˜å‚¨ï¼š** `2025-10-22 18:00:00`ï¼ˆæ²¡æœ‰æ—¶åŒºä¿¡æ¯ï¼‰
4. **åºåˆ—åŒ–ä¸º JSONï¼š** `"2025-10-22T18:00:00.123456"`ï¼ˆæ²¡æœ‰æ—¶åŒºæ ‡è¯†ï¼‰

### å‰ç«¯æ¥æ”¶åˆ°çš„æ—¶é—´

```json
{
  "submitted_at": "2025-10-22T18:00:00.123456"
}
```

### é—®é¢˜æ‰€åœ¨

**å…³é”®é—®é¢˜ï¼šåç«¯å­˜å‚¨çš„æ˜¯ UTC+8 æ—¶é—´ï¼Œè¿˜æ˜¯ UTC æ—¶é—´ï¼Ÿ**

è®©æˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹å®é™…æƒ…å†µ...

**å®éªŒï¼š**

```python
# æœåŠ¡å™¨åœ¨ UTC+8 æ—¶åŒº
datetime.now()
# â†’ 2025-10-22 18:00:00ï¼ˆæœ¬åœ°æ—¶é—´ï¼ŒUTC+8ï¼‰

datetime.utcnow()
# â†’ 2025-10-22 10:00:00ï¼ˆUTC æ—¶é—´ï¼‰
```

**å¦‚æœä½¿ç”¨ `datetime.now()`ï¼š**

- å­˜å‚¨çš„æ˜¯ï¼š`18:00`ï¼ˆUTC+8ï¼‰
- åºåˆ—åŒ–ä¸ºï¼š`"2025-10-22T18:00:00"`
- å‰ç«¯è§£æï¼šå½“ä½œæœ¬åœ°æ—¶é—´ `18:00 GMT+0800`
- **ç»“æœï¼šæ­£ç¡®ï¼** âœ…

**ä½†ç”¨æˆ·æŠ¥å‘Šçš„é—®é¢˜æ˜¯ï¼šæ™šäº†8å°æ—¶** âŒ

**è¿™æ„å‘³ç€ï¼š**

1. å¯èƒ½åç«¯å®é™…ä½¿ç”¨çš„æ˜¯ `datetime.utcnow()`ï¼Ÿ
2. æˆ–è€…æ•°æ®åº“ä½¿ç”¨çš„æ˜¯ UTC æ—¶åŒºï¼Ÿ
3. æˆ–è€… PostgreSQL çš„ `func.now()` è¿”å›çš„æ˜¯ UTC æ—¶é—´ï¼Ÿ

è®©æˆ‘æ£€æŸ¥ PostgreSQL çš„æ—¶åŒºè®¾ç½®...

---

## ğŸ” é—®é¢˜çœŸç›¸

### PostgreSQL æ—¶åŒº

**å…³é”®ï¼š** PostgreSQL çš„ `now()` å‡½æ•°è¿”å›çš„æ—¶é—´**å–å†³äºæ•°æ®åº“æœåŠ¡å™¨çš„æ—¶åŒºè®¾ç½®**

```sql
-- æŸ¥çœ‹æ•°æ®åº“æ—¶åŒº
SHOW timezone;
-- å¯èƒ½è¿”å›ï¼šUTC æˆ– Asia/Shanghai

-- å¦‚æœè¿”å› UTCï¼š
-- func.now() â†’ 2025-10-22 10:00:00ï¼ˆUTCï¼‰

-- å¦‚æœè¿”å› Asia/Shanghaiï¼š
-- func.now() â†’ 2025-10-22 18:00:00ï¼ˆUTC+8ï¼‰
```

### å¯èƒ½çš„æƒ…å†µ

#### æƒ…å†µ1ï¼šæ•°æ®åº“æ—¶åŒºæ˜¯ UTCï¼ˆæœ€å¯èƒ½ï¼‰

```
ç”¨æˆ·æ“ä½œï¼šåŒ—äº¬æ—¶é—´ 18:00
   â†“
åç«¯ datetime.now()ï¼š18:00ï¼ˆæœ¬åœ°æ—¶é—´ï¼ŒUTC+8ï¼‰
   â†“
å­˜å…¥æ•°æ®åº“ï¼ˆä½†æ•°æ®åº“è®¤ä¸ºè¿™æ˜¯ UTC æ—¶é—´ï¼‰
   â†“
æ•°æ®åº“å­˜å‚¨ï¼š18:00ï¼ˆä½œä¸º UTCï¼‰
   â†“
è¯»å–å¹¶åºåˆ—åŒ–ï¼š18:00ï¼ˆä½†å®é™…åº”è¯¥æ˜¯ 10:00 UTCï¼‰
   â†“
å‰ç«¯æ˜¾ç¤ºï¼š18:00ï¼ˆåº”è¯¥æ˜¯ 26:00ï¼Ÿä¸å¯¹...ï¼‰
```

ä¸å¯¹ï¼Œè¿™ä¸ªé€»è¾‘è¿˜æ˜¯ä¸å¯¹ã€‚

è®©æˆ‘é‡æ–°æ€è€ƒ...

### æ­£ç¡®åˆ†æ

**ç”¨æˆ·æŠ¥å‘Šï¼šæ˜¾ç¤ºæ—¶é—´æ™šäº†8å°æ—¶**

```
å®é™…æ“ä½œæ—¶é—´ï¼šåŒ—äº¬æ—¶é—´ 18:00
æ˜¾ç¤ºæ—¶é—´ï¼š10:00ï¼ˆæ™šäº†8å°æ—¶ï¼‰
```

**è¿™æ„å‘³ç€ï¼š**

1. **åç«¯å­˜å‚¨çš„æ˜¯ UTC æ—¶é—´**ï¼ˆ10:00ï¼‰
2. **å‰ç«¯è§£æä¸ºæœ¬åœ°æ—¶é—´**ï¼ˆ10:00 Beijing = 10:00ï¼‰
3. **åº”è¯¥æ˜¾ç¤ºï¼š18:00 Beijing**

**æ­£ç¡®æµç¨‹åº”è¯¥æ˜¯ï¼š**

```
1. ç”¨æˆ·åœ¨åŒ—äº¬æ—¶é—´ 18:00 æ“ä½œ
2. åç«¯åº”è¯¥å­˜å‚¨ï¼šUTC 10:00ï¼ˆæˆ–æ ‡è®°ä¸º UTC+8 18:00ï¼‰
3. è¿”å›å‰ç«¯ï¼š"2025-10-22T10:00:00Z"ï¼ˆæ ‡è®°ä¸º UTCï¼‰
4. å‰ç«¯è§£æï¼š10:00 UTC = 18:00 Beijing âœ…
```

**å½“å‰é—®é¢˜ï¼š**

```
1. åç«¯å­˜å‚¨ï¼šUTC 10:00ï¼ˆæ­£ç¡®ï¼‰
2. è¿”å›å‰ç«¯ï¼š"2025-10-22T10:00:00"ï¼ˆç¼ºå°‘ Zï¼‰âŒ
3. å‰ç«¯è§£æï¼šå½“ä½œæœ¬åœ°æ—¶é—´ 10:00 Beijingï¼ˆé”™è¯¯ï¼‰
4. æ˜¾ç¤ºï¼š10:00ï¼ˆåº”è¯¥æ˜¯ 18:00ï¼‰âŒ
```

**è§£å†³æ–¹æ¡ˆï¼š**

```typescript
// æ·»åŠ  Z æ ‡è¯†
'2025-10-22T10:00:00' + 'Z'
// â†’ "2025-10-22T10:00:00Z"

new Date('2025-10-22T10:00:00Z')
// â†’ 18:00 Beijing âœ…
```

---

## âœ… å·²ä¿®å¤çš„é—®é¢˜

### ä¿®å¤çš„é¡µé¢

| é¡µé¢           | æ–‡ä»¶                       | ä¿®å¤å†…å®¹                   |
| -------------- | -------------------------- | -------------------------- |
| **ä»»åŠ¡å®¡æ ¸**   | `task-review/index.vue`    | formatDateTime, formatDate |
| **æˆ‘çš„å·¥ä½œå°** | `my-workspace/index.vue`   | formatDateTime             |
| **é¡¹ç›®ä»ªè¡¨æ¿** | `dashboard/index.vue`      | formatTimeAgo              |
| **ä¸ªäººç»©æ•ˆ**   | `performance/personal.vue` | formatDateTime             |

### ä¿®å¤çš„æ—¶é—´å­—æ®µ

- âœ… `created_at` - åˆ›å»ºæ—¶é—´
- âœ… `assigned_at` - é¢†å–/åˆ†é…æ—¶é—´
- âœ… `submitted_at` - æäº¤æ—¶é—´
- âœ… `reviewed_at` - å®¡æ ¸/å®Œæˆæ—¶é—´
- âœ… `updated_at` - æ›´æ–°æ—¶é—´

---

## ğŸ“ å®Œæ•´æ–‡ä»¶æ¸…å•

### æ–°å»ºæ–‡ä»¶

| æ–‡ä»¶                           | è¯´æ˜               |
| ------------------------------ | ------------------ |
| `src/utils/timeFormat.ts`      | é€šç”¨æ—¶é—´æ ¼å¼åŒ–å·¥å…· |
| `FIX_TIME_ZONE_ISSUE.md`       | æ—¶åŒºé—®é¢˜ä¿®å¤æ–‡æ¡£   |
| `TIME_HANDLING_EXPLANATION.md` | æœ¬æ–‡æ¡£             |

### ä¿®æ”¹æ–‡ä»¶

| æ–‡ä»¶                                         | ä¿®æ”¹å†…å®¹                   |
| -------------------------------------------- | -------------------------- |
| `src/views/project/task-review/index.vue`    | å¯¼å…¥å¹¶ä½¿ç”¨ timeFormat å·¥å…· |
| `src/views/project/my-workspace/index.vue`   | å¯¼å…¥å¹¶ä½¿ç”¨ timeFormat å·¥å…· |
| `src/views/project/dashboard/index.vue`      | ç®€åŒ–ä¸ºè°ƒç”¨ timeFormat å·¥å…· |
| `src/views/project/performance/personal.vue` | å¯¼å…¥å¹¶ä½¿ç”¨ timeFormat å·¥å…· |

---

## ğŸ’¡ æ€»ç»“

### é—®é¢˜æœ¬è´¨

1. **åç«¯å­˜å‚¨ï¼š** UTC æ—¶é—´ï¼ˆ10:00ï¼‰
2. **åºåˆ—åŒ–ç¼ºé™·ï¼š** ç¼ºå°‘æ—¶åŒºæ ‡è¯†ç¬¦ `Z`
3. **å‰ç«¯è¯¯è§£ï¼š** å½“ä½œæœ¬åœ°æ—¶é—´è§£æ
4. **æ˜¾ç¤ºé”™è¯¯ï¼š** æ™šäº†8å°æ—¶

### è§£å†³æ–¹æ¡ˆ

**å‰ç«¯ä¿®å¤ï¼š** è‡ªåŠ¨æ£€æµ‹å¹¶æ·»åŠ  `Z` æ ‡è¯†ï¼Œç¡®ä¿æ­£ç¡®è§£æä¸º UTC æ—¶é—´

**æ ¸å¿ƒå·¥å…·ï¼š**

```typescript
// src/utils/timeFormat.ts
export function fixUTCTimeString(timeStr: string): string {
  // æ£€æµ‹ç¼ºå°‘ Z çš„ UTC æ—¶é—´
  if (timeStr.includes('T') && !timeStr.includes('Z') && !timeStr.includes('+')) {
    return timeStr.split('.')[0] + 'Z'
  }
  return timeStr
}
```

### æ•ˆæœ

- âœ… æ‰€æœ‰ä»»åŠ¡æ—¶é—´æ˜¾ç¤ºæ­£ç¡®
- âœ… ä¸ªäººç»©æ•ˆæ—¶é—´æ˜¾ç¤ºæ­£ç¡®
- âœ… é¡¹ç›®ä»ªè¡¨æ¿åŠ¨æ€æ—¶é—´æ­£ç¡®
- âœ… ç»Ÿä¸€çš„æ—¶é—´æ ¼å¼åŒ–é€»è¾‘
- âœ… æ˜“äºç»´æŠ¤å’Œæ‰©å±•

### åç»­å»ºè®®

**åç«¯æ”¹è¿›ï¼ˆå¯é€‰ï¼‰ï¼š**

1. ç»Ÿä¸€ä½¿ç”¨ `datetime.now(timezone.utc)`
2. Pydantic Schema æ·»åŠ  `@field_serializer` ç¡®ä¿è¿”å›å¸¦ `Z` çš„æ—¶é—´
3. æ•°æ®åº“ä½¿ç”¨ `TIMESTAMP WITH TIME ZONE`

**å‰ç«¯å·²å®Œæˆï¼š**

- âœ… ç»Ÿä¸€æ—¶é—´æ ¼å¼åŒ–å·¥å…·
- âœ… è‡ªåŠ¨ä¿®å¤ UTC æ—¶é—´æ ‡è¯†
- âœ… å¤šç§æ ¼å¼æ”¯æŒï¼ˆdatetime, date, time, timeAgoï¼‰

---

**ğŸ‰ æ—¶é—´æ˜¾ç¤ºé—®é¢˜å·²å…¨é¢è§£å†³ï¼**
