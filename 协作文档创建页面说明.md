# 协作文档创建页面 - 全新设计

## 🎨 设计理念

完全重构了协作文档创建页面，采用现代文档编辑器设计风格（类似 Notion、飞书文档），提供更加清爽、专注的创作体验。

## ✨ 核心特性

### 1. **极简编辑器封装**

- ✅ 直接使用 XNote 官方最简洁的初始化方式
- ✅ 移除所有复杂配置，只保留核心功能
- ✅ 工具栏由 XNote 自动管理（左侧工具栏 + 内联工具栏）

### 2. **全新页面布局**

#### **顶部操作栏**

- 🔙 返回按钮（圆形图标）
- 📄 页面标题："创建协作文档"
- 📥 导入按钮：Markdown、Word
- ✅ 创建按钮（主操作）

#### **主编辑区（左侧，占主要空间）**

- 📝 **大标题输入**：32px 粗体，无边框，极简设计
- 📄 **描述输入**：15px 灰色，2行，可选
- 📐 **分隔线**
- ✏️ **富文本编辑器**：XNote 完整编辑器，自适应高度

#### **设置面板（右侧，320px）**

- ⚙️ **文档设置**：优先级、状态（带 emoji 图标）
- 👥 **协作成员**：多选下拉，折叠标签显示
- 🏷️ **标签**：可创建新标签，按 Enter 确认
- 📊 **统计信息**：标题/描述字数统计

## 🎯 使用方式

### **创建文档流程**

1. **输入标题**

   - 在顶部大标题框输入文档标题
   - 最多 100 字符

2. **添加描述（可选）**

   - 在描述框添加简短说明
   - 最多 500 字符

3. **编写内容**

   - 点击编辑器区域开始输入
   - **左侧工具栏**：鼠标移到段落左侧出现，提供段落级操作（标题、列表、表格等）
   - **内联工具栏**：选中文字后浮出，提供文字格式化（加粗、斜体、颜色等）

4. **设置文档属性**

   - 右侧面板设置优先级、状态
   - 选择协作成员
   - 添加标签分类

5. **提交创建**
   - 点击顶部"创建文档"按钮

### **导入功能**

#### **导入 Markdown**

- 点击"导入 Markdown"按钮
- 拖拽或点击上传 `.md` 文件
- 第一行自动识别为标题
- 其余内容转换为正文

#### **导入 Word**

- 点击"导入 Word"按钮
- 拖拽或点击上传 `.docx` 文件
- 自动转换为 HTML 格式

## 🎨 视觉设计

### **配色方案**

- 背景：`#f5f7fa`（浅灰）
- 卡片：`#ffffff`（纯白）
- 主文字：`#1f2937`（深灰黑）
- 次要文字：`#6b7280`（中灰）
- 提示文字：`#9ca3af`（浅灰）
- 占位符：`#d1d5db`（极浅灰）

### **圆角与阴影**

- 卡片圆角：`12px`
- 按钮圆角：`4px`（默认）
- 阴影：`0 1px 3px rgba(0, 0, 0, 0.05)`（轻微）

### **间距系统**

- 页面内边距：`24px`
- 卡片内边距：`32px`（编辑器）、`24px`（面板）
- 元素间距：`16px`（标准）、`12px`（紧凑）

## 🔧 技术实现

### **编辑器组件** (`art-textbus-editor/index.vue`)

```typescript
// 极简初始化
const editor = new Editor({
  content: props.modelValue || `<p>${props.placeholder}</p>`,
  providers: [
    {
      provide: FileUploader,
      useValue: new CustomFileUploader()
    }
  ]
})

await editor.mount(editorRef.value)
```

### **关键特性**

- ✅ 使用轮询监听内容变化（简单可靠）
- ✅ 工具栏 z-index: 99999（确保不被遮挡）
- ✅ 支持文件上传（图片、视频）
- ✅ 自动清理资源（onBeforeUnmount）

### **响应式布局**

- `< 1200px`：设置面板宽度缩小至 280px
- `< 992px`：垂直布局，面板移到底部

## 🚀 后续优化方向

### 1. **启用多人协作**（待完成）

```typescript
const editor = new Editor({
  collaborateConfig: {
    userinfo: {
      id: currentUser.id,
      username: currentUser.name,
      color: '#4ade80'
    },
    createConnector(yDoc) {
      return new YWebsocketConnector('wss://your-server/collab', `doc-${docId}`, yDoc)
    }
  }
})
```

### 2. **增强功能**

- [ ] 自动保存草稿
- [ ] 版本历史
- [ ] 实时字数统计
- [ ] 导出 PDF/Markdown
- [ ] 模板选择

### 3. **性能优化**

- [ ] 编辑器懒加载
- [ ] 图片压缩上传
- [ ] 防抖保存

## 📝 使用建议

1. **专注写作**：大标题、无边框设计让你专注内容本身
2. **快速格式化**：使用快捷键（Ctrl+B 加粗、Ctrl+I 斜体等）
3. **善用工具栏**：左侧工具栏提供丰富的段落格式，内联工具栏快速格式化文字
4. **组织内容**：使用标签分类，协作成员协同编辑
5. **导入现有文档**：支持 Markdown 和 Word，快速迁移内容

## 🎉 体验提升

相比旧版本：

- ✅ **更快**：极简初始化，秒开编辑器
- ✅ **更稳**：使用 XNote 默认配置，不再出现工具栏消失问题
- ✅ **更美**：现代化设计，专注内容创作
- ✅ **更易用**：清晰的布局，直观的操作

立即体验全新的协作文档创建页面！🚀
